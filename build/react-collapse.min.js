!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React"),require("ReactMotion")):"function"==typeof define&&define.amd?define(["React","ReactMotion"],e):"object"==typeof exports?exports.ReactCollapse=e(require("React"),require("ReactMotion")):t.ReactCollapse=e(t.React,t.ReactMotion)}(this,function(t,e){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Collapse",function(){return y});var a=n(1),c=n.n(a),u=n(3),l=(n.n(u),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f="IDLING",h=function(){return null},d={collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},y=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return v.call(n),n.state={currentState:f,from:0,to:0},n}return s(e,t),p(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.isOpened,n=t.forceInitialAnimation,o=t.onRest;if(e){var r=this.getTo();if(n){var i=this.wrapper.clientHeight;this.setState({currentState:"RESIZING",from:i,to:r})}else this.setState({currentState:f,from:r,to:r})}o()}},{key:"componentWillReceiveProps",value:function(t){t.hasNestedCollapse?t.isOpened!==this.props.isOpened&&this.setState({currentState:"WAITING"}):this.state.currentState===f&&(t.isOpened||this.props.isOpened)&&this.setState({currentState:"WAITING"})}},{key:"componentDidUpdate",value:function(t,e){var n=this.props,o=n.isOpened,r=n.onRest,i=n.onMeasure;if(this.state.currentState===f)return void r();e.to!==this.state.to&&i({height:this.state.to,width:this.content.clientWidth});var s=this.wrapper.clientHeight,a=o?this.getTo():0;if(s!==a)return void this.setState({currentState:"RESIZING",from:s,to:a});"RESTING"!==this.state.currentState&&"WAITING"!==this.state.currentState||this.setState({currentState:f,from:s,to:a})}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){return c.a.createElement(u.Motion,l({},this.getMotionProps(),{onRest:this.onRest}),this.renderContent)}}]),e}(c.a.PureComponent);y.defaultProps={springConfig:{},forceInitialAnimation:!1,hasNestedCollapse:!1,fixedHeight:-1,style:{},theme:d,onRender:h,onRest:h,onMeasure:h};var v=function(){var t=this;this.onContentRef=function(e){t.content=e},this.onWrapperRef=function(e){t.wrapper=e},this.onRest=function(){t.raf=requestAnimationFrame(t.setResting)},this.setResting=function(){t.setState({currentState:"RESTING"})},this.getTo=function(){var e=t.props.fixedHeight;return e>-1?e:t.content.clientHeight},this.getWrapperStyle=function(e){if(t.state.currentState===f&&t.state.to){var n=t.props.fixedHeight;return n>-1?{overflow:"hidden",visibility:t.getVisibility(n),height:n}:{height:"auto",visibility:"initial"}}return"WAITING"!==t.state.currentState||t.state.to?{overflow:"hidden",visibility:t.getVisibility(e),height:Math.max(0,e)}:{overflow:"hidden",visibility:"hidden",height:0}},this.getVisibility=function(t){return t<=0?"hidden":"initial"},this.getMotionProps=function(){var e=t.props.springConfig;return t.state.currentState===f?{defaultStyle:{height:t.state.to},style:{height:t.state.to}}:{defaultStyle:{height:t.state.from},style:{height:Object(u.spring)(t.state.to,l({precision:1},e))}}},this.renderContent=function(e){var n=e.height,r=t.props,i=(r.isOpened,r.springConfig,r.forceInitialAnimation,r.hasNestedCollapse,r.fixedHeight,r.theme),s=r.style,a=r.onRender,u=(r.onRest,r.onMeasure,r.children),p=o(r,["isOpened","springConfig","forceInitialAnimation","hasNestedCollapse","fixedHeight","theme","style","onRender","onRest","onMeasure","children"]),f=t.state;return a({current:n,from:f.from,to:f.to}),c.a.createElement("div",l({ref:t.onWrapperRef,className:i.collapse,style:l({},t.getWrapperStyle(Math.max(0,n)),s)},p),c.a.createElement("div",{ref:t.onContentRef,className:i.content},u))}}},function(e,n){e.exports=t},function(t,e,n){"use strict";var o=n(0),r=o.Collapse,i=n(4),s=i.UnmountClosed;s.Collapse=r,s.UnmountClosed=s,t.exports=s},function(t,n){t.exports=e},function(t,e,n){"use strict";function o(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"UnmountClosed",function(){return f});var a=n(1),c=n.n(a),u=n(0),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.componentWillReceiveProps=function(t){var e=t.isOpened;!n.props.isOpened&&e&&n.setState({forceInitialAnimation:!0,shouldUnmount:!1})},n.onRest=function(){var t=n.props,e=t.isOpened,o=t.onRest;e||n.setState({shouldUnmount:!0}),o&&o.apply(void 0,arguments)},n.state={shouldUnmount:!n.props.isOpened,forceInitialAnimation:!n.props.isOpened},n}return s(e,t),p(e,[{key:"render",value:function(){var t=this.props,e=t.isOpened,n=(t.onRest,o(t,["isOpened","onRest"])),r=this.state,i=r.forceInitialAnimation;return r.shouldUnmount?null:c.a.createElement(u.Collapse,l({forceInitialAnimation:i,isOpened:e,onRest:this.onRest},n))}}]),e}(c.a.PureComponent);f.defaultProps={onRest:void 0}}])});